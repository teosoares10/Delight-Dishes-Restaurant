"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[4724],{4468:function(I,i,e){e.d(i,{I:function(){return t},U:function(){return n}});const t="strapi_stage",n="strapi_assignee"},91130:function(I,i,e){e.r(i),e.d(i,{InformationBoxEE:function(){return j}});var t=e(32735),n=e(30126),r=e(98865),g=e(750),o=e(84642),c=e(70843),u=e(8241),l=e(67879),s=e(20108),w=e(15062),d=e(69997),m=e(97108),T=e(30305),a=e(4468);function N(){const{initialData:C,layout:{uid:L},isSingleType:P,onChange:Q}=(0,n.Wq)(),H=(0,w.v9)(T._),{formatMessage:E}=(0,l.Z)(),{formatAPIError:V}=(0,n.So)(),X=(0,n.lm)(),{put:z}=(0,n.kY)(),{allowedActions:{canReadUsers:M},isLoading:k}=(0,n.ss)({readUsers:H.settings.users.read}),{users:K,isLoading:U,isError:D}=(0,m.R)({},{enabled:!k&&M}),W=C?.[a.U]??null,O=async({value:v})=>{A.mutate({entityId:C.id,assigneeId:parseInt(v,10),uid:L})},A=(0,s.useMutation)(async({entityId:v,assigneeId:b,uid:p})=>{const R=P?"single-types":"collection-types",{data:{data:S}}=await z(`/admin/content-manager/${R}/${p}/${v}/assignee`,{data:{id:b}});return Q({target:{name:a.U,value:S[a.U]}},!0),S},{onSuccess(){X({type:"success",message:{id:"content-manager.reviewWorkflows.assignee.notification.saved",defaultMessage:"Assignee updated"}})}});return t.createElement(g.g,{name:a.U,id:a.U},t.createElement(o.k,{direction:"column",gap:2,alignItems:"stretch"},t.createElement(c.hQ,{clearLabel:E({id:"content-manager.reviewWorkflows.assignee.clear",defaultMessage:"Clear assignee"}),error:D&&M&&E({id:"content-manager.reviewWorkflows.assignee.error",defaultMessage:"An error occurred while fetching users"})||A.error&&V(A.error),disabled:!k&&!U&&K.length===0,name:a.U,id:a.U,value:W?W.id:null,onChange:v=>O({value:v}),onClear:()=>O({value:null}),placeholder:E({id:"content-manager.reviewWorkflows.assignee.placeholder",defaultMessage:"Select \u2026"}),label:E({id:"content-manager.reviewWorkflows.assignee.label",defaultMessage:"Assignee"}),loading:U||k||A.isLoading},K.map(v=>t.createElement(u.O,{key:v.id,value:v.id,textValue:(0,d.Gf)(v,E)},(0,d.Gf)(v,E))))))}var B=e(4987),$=e(8365),F=e(35547),x=e(15667),Z=e(98866),y=e(90562),h=e(2121),f=e(32329),G=e(68886);function Y(){const{initialData:C,layout:{uid:L},isSingleType:P,onChange:Q}=(0,n.Wq)(),{put:H}=(0,n.kY)(),{formatMessage:E}=(0,l.Z)(),{formatAPIError:V}=(0,n.So)(),X=(0,n.lm)(),{meta:z,workflows:[M],isLoading:k}=(0,f.n)({filters:{contentTypes:L}}),{getFeature:K}=(0,Z.q)(),[U,D]=t.useState(!1),W=K("review-workflows"),O=C?.[a.I]??null,A=(0,s.useMutation)(async({entityId:p,stageId:R,uid:S})=>{const J=P?"single-types":"collection-types",{data:{data:q}}=await H(`/admin/content-manager/${J}/${S}/${p}/stage`,{data:{id:R}});return Q({target:{name:a.I,value:q[a.I]}},!0),q},{onSuccess(){X({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}})}}),v=async({value:p})=>{try{W?.[h.Ef]&&parseInt(W[h.Ef],10)<z.workflowCount?D("workflow"):W?.[h._X]&&parseInt(W[h._X],10)<M.stages.length?D("stage"):A.mutateAsync({entityId:C.id,stageId:p,uid:L})}catch{}},{themeColorName:b}=O?.color?(0,G.k)(O?.color):{};return t.createElement(t.Fragment,null,t.createElement(g.g,{name:a.I,id:a.I},t.createElement(o.k,{direction:"column",gap:2,alignItems:"stretch"},t.createElement(B.q4,{error:A.error&&V(A.error)||null,name:a.I,id:a.I,value:O?.id,onChange:p=>v({value:p}),label:E({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:t.createElement(o.k,{as:"span",height:2,background:O?.color,borderColor:b==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>t.createElement(o.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},t.createElement($.Z,{textColor:"neutral800",ellipsis:!0},O?.name),k?t.createElement(F.a,{small:!0,style:{display:"flex"}}):null)},M?M.stages.map(({id:p,color:R,name:S})=>{const{themeColorName:J}=(0,G.k)(R);return t.createElement(B.ag,{key:p,startIcon:t.createElement(o.k,{height:2,background:R,borderColor:J==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),value:p,textValue:S},S)}):[]),t.createElement(x.c,null))),t.createElement(y.fC,{isOpen:U==="workflow",onClose:()=>D(!1)},t.createElement(y.Dx,null,E({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(y.uT,null,E({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."}))),t.createElement(y.fC,{isOpen:U==="stage",onClose:()=>D(!1)},t.createElement(y.Dx,null,E({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})),t.createElement(y.uT,null,E({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."}))))}function j(){const{isCreatingEntry:C,layout:{options:L}}=(0,n.Wq)(),P=L?.reviewWorkflows??!1;return t.createElement(r.d.Root,null,t.createElement(r.d.Title,null),P&&!C&&t.createElement(t.Fragment,null,t.createElement(Y,null),t.createElement(N,null)),t.createElement(r.d.Body,null))}},98866:function(I,i,e){e.d(i,{q:function(){return g}});var t=e(32735),n=e(30126),r=e(20108);function g({enabled:o}={enabled:!0}){const{get:c}=(0,n.kY)(),{data:u,isError:l,isLoading:s}=(0,r.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:m}}=await c("/admin/license-limit-information");return m},{enabled:o}),w=t.useMemo(()=>u??{},[u]),d=t.useCallback(m=>(w?.features??[]).find(a=>a.name===m)?.options??{},[w?.features]);return{license:w,getFeature:d,isError:l,isLoading:s}}},90562:function(I,i,e){e.d(i,{uT:function(){return x},fC:function(){return h},Dx:function(){return F}});var t=e(32735),n=e(8365),r=e(84642),g=e(21223),o=e(87674),c=e(77981),u=e(14763),l=e(90431),s=e(98610),w=e(60216),d=e.n(w),m=e(67879),T=e(8471),a=e.p+"0cd5f8915b265d5b1856.png";const N="limits-title",B="https://strapi.io/pricing-cloud",$="https://strapi.io/contact-sales";function F({children:f}){return t.createElement(n.Z,{variant:"alpha",id:N},f)}F.propTypes={children:d().node.isRequired};function x({children:f}){return t.createElement(n.Z,{variant:"omega"},f)}x.propTypes={children:d().node.isRequired};function Z(){const{formatMessage:f}=(0,m.Z)();return t.createElement(r.k,{gap:2,paddingTop:4},t.createElement(l.Q,{variant:"default",isExternal:!0,href:B},f({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(l.Q,{variant:"tertiary",isExternal:!0,href:$},f({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const y=T.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:f})=>`-${f.spaces[7]}`};
  margin-top: ${({theme:f})=>`-${f.spaces[7]}`};
  width: 360px;
`;function h({children:f,isOpen:G,onClose:Y}){const{formatMessage:j}=(0,m.Z)();return G?t.createElement(g.P,{labelledBy:N},t.createElement(o.f,null,t.createElement(r.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(r.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},f,t.createElement(Z,null)),t.createElement(r.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(y,{src:a,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(c.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(u.h,{icon:t.createElement(s.Z,null),"aria-label":j({id:"global.close",defaultMessage:"Close"}),onClick:Y})))))):null}h.defaultProps={isOpen:!1},h.propTypes={children:d().node.isRequired,isOpen:d().bool,onClose:d().func.isRequired}},2121:function(I,i,e){e.d(i,{$k:function(){return l},Ef:function(){return T},FT:function(){return d},Nj:function(){return u},Ot:function(){return c},VS:function(){return s},_X:function(){return a},gu:function(){return r},lv:function(){return w},qZ:function(){return g},sN:function(){return n},uL:function(){return m},x4:function(){return o}});var t=e(41865);const n="settings_review-workflows",r="Settings/Review_Workflows/RESET_WORKFLOW",g="Settings/Review_Workflows/SET_WORKFLOW",o="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",c="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",u="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",l="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",s="Settings/Review_Workflows/WORKFLOW_UPDATE",w={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},d=t.W.colors.primary600,m={STAGE:"stage"},T="numberOfWorkflows",a="stagesPerWorkflow"},32329:function(I,i,e){e.d(i,{n:function(){return r}});var t=e(30126),n=e(20108);function r(g={}){const{get:o}=(0,t.kY)(),{id:c="",...u}=g,l={populate:"stages"},{data:s,isLoading:w,status:d,refetch:m}=(0,n.useQuery)(["review-workflows","workflows",c],async()=>(await o(`/admin/review-workflows/workflows/${c}`,{params:{...l,...u}})).data);let T=[];return c&&s?.data?T=[s.data]:Array.isArray(s?.data)&&(T=s.data),{meta:s?.meta??{},workflows:T,isLoading:w,status:d,refetch:m}}},68886:function(I,i,e){e.d(i,{k:function(){return r},s:function(){return g}});var t=e(41865),n=e(2121);function r(o){if(!o)return null;const u=Object.entries(t.W.colors).filter(([,l])=>l.toUpperCase()===o.toUpperCase()).reduce((l,[s])=>(n.lv?.[s]&&(l=s),l),null);return u?{themeColorName:u,name:n.lv[u]}:null}function g(){return Object.entries(n.lv).map(([o,c])=>({hex:t.W.colors[o].toUpperCase(),name:c}))}}}]);
