"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[349],{17379:function(O,d,t){t.d(d,{r:function(){return g}});var e=t(32735),n=t(77981),r=t(60216),f=t.n(r),E=t(74506);function u(m,l,a){if(!m||!l)return{display:"none"};const{x:o,y:s}=a;return{transform:`translate(${o}px, ${s}px)`}}function g({renderItem:m}){const{itemType:l,isDragging:a,item:o,initialOffset:s,currentOffset:y,mouseOffset:p}=(0,E.useDragLayer)(T=>({item:T.getItem(),itemType:T.getItemType(),initialOffset:T.getInitialSourceClientOffset(),currentOffset:T.getSourceClientOffset(),isDragging:T.isDragging(),mouseOffset:T.getClientOffset()}));return a?e.createElement(n.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},e.createElement(n.x,{style:u(s,y,p)},m({type:l,item:o}))):null}g.propTypes={renderItem:f().func.isRequired}},98866:function(O,d,t){t.d(d,{q:function(){return f}});var e=t(32735),n=t(30126),r=t(20108);function f({enabled:E}={enabled:!0}){const{get:u}=(0,n.kY)(),{data:g,isError:m,isLoading:l}=(0,r.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:s}}=await u("/admin/license-limit-information");return s},{enabled:E}),a=e.useMemo(()=>g??{},[g]),o=e.useCallback(s=>(a?.features??[]).find(p=>p.name===s)?.options??{},[a?.features]);return{license:a,getFeature:o,isError:m,isLoading:l}}},27187:function(O,d,t){t.d(d,{eJ:function(){return D},lx:function(){return I},h4:function(){return v},fC:function(){return P}});var e=t(32735),n=t(99226),r=t(95162),f=t(56932),E=t(64092),u=t(30126),g=t(70788),m=t(67879),l=t(17379),a=t(2121),o=t(84642),s=t(8365),y=t(91917),p=t(60216),T=t.n(p),A=t(8471);const W=(0,A.ZP)(o.k)`
  svg path {
    fill: ${({theme:w})=>w.colors.neutral600};
  }
`;function C({name:w}){return e.createElement(o.k,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,u.Q1)(300)},e.createElement(W,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},e.createElement(y.Z,{width:`${8/16}rem`})),e.createElement(s.Z,{fontWeight:"bold"},w))}C.propTypes={name:T().string.isRequired};function R({type:w,item:h}){switch(w){case a.uL.STAGE:return e.createElement(C,{...h});default:return null}}function I(){return e.createElement(l.r,{renderItem:R})}function P({children:w}){return e.createElement(n.A,null,e.createElement(r.o,{tabIndex:-1},e.createElement(f.D,null,w)))}function D({href:w}){const{formatMessage:h}=(0,m.Z)();return e.createElement(u.rU,{startIcon:e.createElement(g.Z,null),to:w},h({id:"global.back",defaultMessage:"Back"}))}function v({title:w,subtitle:h,navigationAction:M,primaryAction:L}){return e.createElement(e.Fragment,null,e.createElement(u.SL,{name:w}),e.createElement(E.T,{navigationAction:M,primaryAction:L,title:w,subtitle:h}))}},90562:function(O,d,t){t.d(d,{uT:function(){return R},fC:function(){return D},Dx:function(){return C}});var e=t(32735),n=t(8365),r=t(84642),f=t(21223),E=t(87674),u=t(77981),g=t(14763),m=t(90431),l=t(98610),a=t(60216),o=t.n(a),s=t(67879),y=t(8471),p=t.p+"0cd5f8915b265d5b1856.png";const T="limits-title",A="https://strapi.io/pricing-cloud",W="https://strapi.io/contact-sales";function C({children:v}){return e.createElement(n.Z,{variant:"alpha",id:T},v)}C.propTypes={children:o().node.isRequired};function R({children:v}){return e.createElement(n.Z,{variant:"omega"},v)}R.propTypes={children:o().node.isRequired};function I(){const{formatMessage:v}=(0,s.Z)();return e.createElement(r.k,{gap:2,paddingTop:4},e.createElement(m.Q,{variant:"default",isExternal:!0,href:A},v({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),e.createElement(m.Q,{variant:"tertiary",isExternal:!0,href:W},v({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const P=y.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:v})=>`-${v.spaces[7]}`};
  margin-top: ${({theme:v})=>`-${v.spaces[7]}`};
  width: 360px;
`;function D({children:v,isOpen:w,onClose:h}){const{formatMessage:M}=(0,s.Z)();return w?e.createElement(f.P,{labelledBy:T},e.createElement(E.f,null,e.createElement(r.k,{gap:2,paddingLeft:7,position:"relative"},e.createElement(r.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},v,e.createElement(I,null)),e.createElement(r.k,{justifyContent:"end",height:"100%",width:"40%"},e.createElement(P,{src:p,"aria-hidden":!0,alt:"",loading:"lazy"}),e.createElement(u.x,{display:"flex",position:"absolute",right:0,top:0},e.createElement(g.h,{icon:e.createElement(l.Z,null),"aria-label":M({id:"global.close",defaultMessage:"Close"}),onClick:h})))))):null}D.defaultProps={isOpen:!1},D.propTypes={children:o().node.isRequired,isOpen:o().bool,onClose:o().func.isRequired}},2121:function(O,d,t){t.d(d,{$k:function(){return m},Ef:function(){return y},FT:function(){return o},Nj:function(){return g},Ot:function(){return u},VS:function(){return l},_X:function(){return p},gu:function(){return r},lv:function(){return a},qZ:function(){return f},sN:function(){return n},uL:function(){return s},x4:function(){return E}});var e=t(41865);const n="settings_review-workflows",r="Settings/Review_Workflows/RESET_WORKFLOW",f="Settings/Review_Workflows/SET_WORKFLOW",E="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",u="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",g="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",m="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",l="Settings/Review_Workflows/WORKFLOW_UPDATE",a={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},o=e.W.colors.primary600,s={STAGE:"stage"},y="numberOfWorkflows",p="stagesPerWorkflow"},32329:function(O,d,t){t.d(d,{n:function(){return r}});var e=t(30126),n=t(20108);function r(f={}){const{get:E}=(0,e.kY)(),{id:u="",...g}=f,m={populate:"stages"},{data:l,isLoading:a,status:o,refetch:s}=(0,n.useQuery)(["review-workflows","workflows",u],async()=>(await E(`/admin/review-workflows/workflows/${u}`,{params:{...m,...g}})).data);let y=[];return u&&l?.data?y=[l.data]:Array.isArray(l?.data)&&(y=l.data),{meta:l?.meta??{},workflows:y,isLoading:a,status:o,refetch:s}}},32033:function(O,d,t){t.r(d),t.d(d,{default:function(){return X}});var e=t(32735),n=t(30126),r=t(15062),f=t(30305),E=t(84642),u=t(35547),g=t(23699),m=t(22116),l=t(41013),a=t(45037),o=t(27947),s=t(8365),y=t(99320),p=t(1690),T=t(14763),A=t(82064),W=t(63318),C=t(94997),R=t(67879),I=t(20108),P=t(53038),D=t(8471),v=t(90769),w=t(98866),h=t(27187),M=t(90562),L=t(2121),Y=t(32329);const V=(0,D.ZP)(n.rU)`
  align-items: center;
  height: ${(0,n.Q1)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:i})=>`${i.spaces[2]}}`};
  width: ${(0,n.Q1)(32)};

  svg {
    height: ${(0,n.Q1)(12)};
    width: ${(0,n.Q1)(12)};

    path {
      fill: ${({theme:i})=>i.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:i})=>i.colors.neutral800};
      }
    }
  }
`;function z(){const{formatMessage:i}=(0,R.Z)(),{push:j}=(0,P.k6)(),{collectionTypes:J,singleTypes:b,isLoading:q}=(0,v.G)(),{meta:x,workflows:K,isLoading:Z,refetch:_}=(0,Y.n)(),[N,$]=e.useState(null),[ee,B]=e.useState(!1),{del:te}=(0,n.kY)(),{formatAPIError:ne}=(0,n.So)(),U=(0,n.lm)(),{getFeature:oe,isLoading:G}=(0,w.q)(),{trackUsage:Q}=(0,n.rS)(),ae=(0,r.v9)(f._),{allowedActions:{canCreate:H,canDelete:se}}=(0,n.ss)(ae.settings["review-workflows"]),S=oe("review-workflows"),{mutateAsync:re,isLoading:le}=(0,I.useMutation)(async({workflowId:c,stages:k})=>{const{data:{data:F}}=await te(`/admin/review-workflows/workflows/${c}`,{data:k});return F},{onSuccess(){U({type:"success",message:{id:"notification.success.deleted",defaultMessage:"Deleted"}})}}),ie=c=>[...J,...b].find(F=>F.uid===c).info.displayName,ce=c=>{$(c)},ue=()=>{$(null)},de=async()=>{try{const c=await re({workflowId:N});return await _(),$(null),c}catch(c){return U({type:"warning",message:ne(c)}),null}};return e.useEffect(()=>{!Z&&!G&&S?.[L.Ef]&&x?.workflowCount>parseInt(S[L.Ef],10)&&B(!0)},[G,Z,S,x?.workflowCount,x.workflowsTotal]),e.createElement(e.Fragment,null,e.createElement(h.h4,{primaryAction:H&&e.createElement(n.Qj,{startIcon:e.createElement(A.Z,null),size:"S",to:"/settings/review-workflows/create",onClick:c=>{S?.[L.Ef]&&x?.workflowCount>=parseInt(S[L.Ef],10)?(c.preventDefault(),B(!0)):Q("willCreateWorkflow")}},i({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),subtitle:i({id:"Settings.review-workflows.list.page.subtitle",defaultMessage:"Manage your content review process"}),title:i({id:"Settings.review-workflows.list.page.title",defaultMessage:"Review Workflows"})}),e.createElement(h.fC,null,Z||q?e.createElement(E.k,{justifyContent:"center"},e.createElement(u.a,null,i({id:"Settings.review-workflows.page.list.isLoading",defaultMessage:"Workflows are loading"}))):e.createElement(g.i,{colCount:3,footer:H&&e.createElement(m.c,{icon:e.createElement(A.Z,null),onClick:()=>{S?.[L.Ef]&&x?.workflowCount>=parseInt(S[L.Ef],10)?B(!0):(j("/settings/review-workflows/create"),Q("willCreateWorkflow"))}},i({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),rowCount:1},e.createElement(l.h,null,e.createElement(a.Tr,null,e.createElement(o.Th,null,e.createElement(s.Z,{variant:"sigma"},i({id:"Settings.review-workflows.list.page.list.column.name.title",defaultMessage:"Name"}))),e.createElement(o.Th,null,e.createElement(s.Z,{variant:"sigma"},i({id:"Settings.review-workflows.list.page.list.column.stages.title",defaultMessage:"Stages"}))),e.createElement(o.Th,null,e.createElement(s.Z,{variant:"sigma"},i({id:"Settings.review-workflows.list.page.list.column.contentTypes.title",defaultMessage:"Content Types"}))),e.createElement(o.Th,null,e.createElement(y.T,null,i({id:"Settings.review-workflows.list.page.list.column.actions.title",defaultMessage:"Actions"}))))),e.createElement(p.p,null,K.map(c=>e.createElement(a.Tr,{...(0,n.X7)({fn(k){k.target.nodeName!=="BUTTON"&&j(`/settings/review-workflows/${c.id}`)}}),key:`workflow-${c.id}`},e.createElement(o.Td,{width:(0,n.Q1)(250)},e.createElement(s.Z,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0},c.name)),e.createElement(o.Td,null,e.createElement(s.Z,{textColor:"neutral800"},c.stages.length)),e.createElement(o.Td,null,e.createElement(s.Z,{textColor:"neutral800"},(c?.contentTypes??[]).map(ie).join(", "))),e.createElement(o.Td,null,e.createElement(E.k,{alignItems:"center",justifyContent:"end"},e.createElement(V,{to:`/settings/review-workflows/${c.id}`,"aria-label":i({id:"Settings.review-workflows.list.page.list.column.actions.edit.label",defaultMessage:"Edit {name}"},{name:c.name})},e.createElement(W.Z,null)),K.length>1&&se&&e.createElement(T.h,{"aria-label":i({id:"Settings.review-workflows.list.page.list.column.actions.delete.label",defaultMessage:"Delete {name}"},{name:"Default workflow"}),icon:e.createElement(C.Z,null),noBorder:!0,onClick:()=>{ce(c.id)}}))))))),e.createElement(n.QH,{bodyText:{id:"Settings.review-workflows.list.page.delete.confirm.body",defaultMessage:"If you remove this worfklow, all stage-related information will be removed for this content-type. Are you sure you want to remove it?"},isConfirmButtonLoading:le,isOpen:!!N,onToggleDialog:ue,onConfirm:de}),e.createElement(M.fC,{isOpen:ee,onClose:()=>B(!1)},e.createElement(M.Dx,null,i({id:"Settings.review-workflows.list.page.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),e.createElement(M.uT,null,i({id:"Settings.review-workflows.list.page.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})))))}function X(){const i=(0,r.v9)(f._);return e.createElement(n.O4,{permissions:i.settings["review-workflows"].main},e.createElement(z,null))}},22116:function(O,d,t){t.d(d,{c:function(){return l}});var e=t(74512),n=t(8471),r=t(77981),f=t(2775),E=t(84642),u=t(8365);const g=(0,n.ZP)(r.x)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:a})=>a.colors.primary600};
  }
`,m=(0,n.ZP)(r.x)`
  border-radius: 0 0 ${({theme:a})=>a.borderRadius} ${({theme:a})=>a.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,l=({children:a,icon:o,...s})=>(0,e.jsxs)("div",{children:[(0,e.jsx)(f.i,{}),(0,e.jsx)(m,{as:"button",background:"primary100",padding:5,...s,children:(0,e.jsxs)(E.k,{children:[(0,e.jsx)(g,{"aria-hidden":!0,background:"primary200",children:o}),(0,e.jsx)(r.x,{paddingLeft:3,children:(0,e.jsx)(u.Z,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:a})})]})})]})},70788:function(O,d,t){t.d(d,{Z:function(){return r}});var e=t(74512);const n=f=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...f,children:(0,e.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),r=n}}]);
